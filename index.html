<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Home - Merchant Integration</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <meta name="csrf-token" content="{{ csrf_token() }}">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">


    <!--Begin nhúng SDK của ZaloPay-->
    <script src="https://sjs.zalopay.com.vn/mini-app/sdk/1.0.1/sdk.js"></script>
    <!--End nhúng SDK của ZaloPay-->


</head>

<body id="page-top" data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="10">
    <header class="text-center text-white" style="padding-top: 10px; background-color: #1e88e5">
        <div class="container">
            <h2>Mini App Demo</h2>
            <p class="font-weight-light mb-0" style="font-size: 14px; padding-bottom: 10px">Using SDK<br>https://scdn.zalopay.com.vn/zst/zpi-spa/sdk/0.1.0/sdk.js<br></p>
        </div>

    </header>

    <div class="active" style="padding: 20px">
        <h4 style="text-align: center; padding-top: 10px;">
            AppID: 1721 (Default)
        </h4>
        <p style="text-align: left;">Call init function by AppID: 1721</p>
        <div class="input-group">
            <textarea class="form-control" readonly rows="4" id="init_result"></textarea>
        </div>

        <div id="accordion" style="padding-top: 20px">
            <div class="">
                <div class="card-header" id="headingOne">
                    <h5 class="mb-0">
                        <button class="btn btn-outline-info btn-block btn-text" data-toggle="collapse" aria-pressed="true" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            #1 Payment by payOrder
                        </button>
                    </h5>
                </div>

                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                    <div class="card-body">
                        <form>
                            <div class="form-group">
                                <label for="exampleInputEmail1">Input ZP Trans Token: </label>
                                <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="zp_trans_token">
                                <small id="emailHelp" class="form-text text-muted">Please input zp_trans_token to payment.</small>
                            </div>
                            <button type="submit" class="btn btn-primary btn-block">PAYMENT</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="">
                <div class="card-header" id="headingFive">
                    <h5 class="mb-0">
                        <button class="btn btn-outline-info btn-block btn-text" data-toggle="collapse" data-target="#collapseFive" aria-expanded="true" aria-controls="collapseOne">
                            #2 Payment by payOrderByOrderInfo
                        </button>
                    </h5>
                </div>

                <div id="collapseFive" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                    <div class="card-body">
                        <form>
                            <div class="form-group">
                                <label for="exampleInputEmail1">Object create order: </label>
                                <textarea style="width: 100%" readonly>

                                </textarea>
                            </div>
                                <div class="form-group">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-6">
                                                <button type="submit" class="btn btn-warning btn-block" style="color: white">CREATE OBJECT</button>
                                            </div>
                                            <div class="col-6">
                                                <button type="submit" class="btn btn-primary btn-block">PAYMENT</button>
                                            </div>
                                        </div>
                                    </div>
                            </div>
                        </form>


                    </div>
                </div>
            </div>
            <div class="">
                <div class="card-header" id="headingTwo">
                    <h5 class="mb-0">
                        <button class="btn btn-outline-info collapsed btn-block btn-text" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Get user information
                        </button>
                    </h5>
                </div>
                <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                    <div class="card-body">
                        <form>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-block">GET USER INFORMATION</button>
                            </div>
                            <div class="form-group">
                                <label for="exampleInputEmail1">User information: </label>
                                <textarea style="width: 100%" readonly>
                                </textarea>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
            <div class="">
                <div class="card-header" id="headingThree">
                    <h5 class="mb-0">
                        <button class="btn btn-outline-info collapsed btn-block btn-text" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Get location
                        </button>
                    </h5>
                </div>
                <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                    <div class="card-body">
                        <form>
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-block">GET LOCATION</button>
                            </div>
                            <div class="form-group">
                                <label for="exampleInputEmail1">Location: </label>
                                <textarea style="width: 100%" readonly>

                                </textarea>
                            </div>
                        </form>

                    </div>
                </div>
            </div>

            <div class="">
                <div class="card-header" id="headingFour">
                    <h5 class="mb-0">
                        <button class="btn btn-outline-info collapsed btn-block btn-text" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseThree">
                            Other function
                        </button>
                    </h5>
                </div>
                <div id="collapseFour" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                    <div class="card-body">
                        <form>
                            <div class="form-group">
                            </div>
                            <button type="submit" class="btn btn-primary btn-block">Show loading</button>
                            <button type="submit" class="btn btn-primary btn-block">Close</button>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <script>
        window.ZLP.init( 1721, "sandboxmc" ).then( result => {
            console.log( result );
            document.getElementById( "init_result" ).value = JSON.stringify( result, null, 4 );

            window.ZLP.User().getUserInfo().then( data => {
                console.log( data );
                document.getElementById( "user_info" ).value = JSON.stringify( data, null, 4 );

            } ).catch( e => {
                console.log( e )
                document.getElementById( "user_info" ).value = JSON.stringify( e, null, 4 );
            } );


            window.ZLP.Device().getCurLocation().then( location => {
                // Your code here
                document.getElementById( "user_location" ).value = JSON.stringify( location );
            } ).catch( e => {
                console.log( e )
                // Your code here
                document.getElementById( "user_location" ).value = JSON.stringify( e );
            } );

            $( '#payment' ).on( 'click touch', () => {
                alert( "Load data " + $( '#zptoken' ).val() );
                window.ZLP.Payment().payOrder( $( '#zptoken' ).val()).then( payment => {
                    // Cod
                    alert( "payment => " + JSON.stringify( payment ) );
                } ).catch( e => {
                    console.log( e );
                    alert( "payment: =>" + e );
                }
                );
            } );


        } ).catch( e => {
            console.log( e );
            document.getElementById( "init_result" ).value = JSON.stringify( e );
        }
        )
    </script>
    <script>
        $( document ).ready( function () {
            // alert("Load ok");
            //      $( '#payment' ).on( 'click touch', () => {
            //          var zlpToken = $( '#zptoken' ).val();
            //                 alert("Load data out " +  zlpToken);
            //                  window.ZLP.Payment().payOrderV2( zlpToken, 'zalopay://launch/app/1721' ).then( payment => {
            //                      alert( "payment" );
            //                   } ).catch( e => {
            //                      console.log( e );
            //                       alert( "payment: =>" + e );
            //                      document.getElementById( "init_result" ).value = JSON.stringify( e );
            //                  }
            //                  );
            // } );

            function getFormattedDate ( date ) {
                let year = date.getFullYear().toString().substr( -2 );
                let month = ( 1 + date.getMonth() ).toString().padStart( 2, '0' );
                let day = date.getDate().toString().padStart( 2, '0' );

                return year + '' + month + '' + day;
            }
        } );
    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<style>
    .card-header {
        border-bottom: none !important;
    }
    .btn-text {
        text-align: left;
    }
</style>
</body>
</html>